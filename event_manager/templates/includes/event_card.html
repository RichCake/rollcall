<div class="card h-100 d-flex flex-column">
  {% if event.category %}
    <div class="card-header">
      <span class="badge bg-secondary">{{ event.category }}</span>
      <span class="badge bg-primary">{{ event.game.name }}</span>
      {% if event.user_status %}
        {% if event.user_status == 0 %}
          <span class="badge bg-secondary">Заявка отправлена</span>
        {% elif event.user_status == 2 %}
          <span class="badge bg-success">Вы записаны</span>
        {% endif %}
      {% endif %}
    </div>
  {% endif %}
  <div class="card-body d-flex flex-column">
    <div class="d-flex align-items-center">
      <h5 class="card-title">{{ event.title }}</h5>
      <a href="{% url "events:detail" pk=event.id %}" class="icon-link"><svg class="bi"><use xlink:href="#chevron-right"/></svg></a>
    </div>
    
    <div class="card-text">
      <p>{{ event.description|truncatechars:100 }}</p>
      <p>Дата: {{ event.end }}</p>
    </div>
    <p>Автор: <a href="{% url "profiles:detail" pk=event.author.id %}">{% if request.user.username == event.author.username %}Вы{% else %}{{ event.author.username }}{% endif %}</a></p>
    {% if event.part_count %}<p>{{ event.part_count }}{% if event.max_participants %}/{{ event.max_participants }}{% endif %} участников</p>{% endif %}
    {% if request.user.is_authenticated %}
      {% if request.user == event.author %}
        <a href="{% url "events:update" pk=event.id %}" class="icon-link">
          Панель управления
          <svg class="bi"><use xlink:href="#chevron-right"/></svg>
        </a>
      {% endif %}
    {% endif %}
  </div>
</div>
